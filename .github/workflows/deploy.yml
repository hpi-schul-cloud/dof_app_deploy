---
name: Build and push Docker Image

on:
  repository_dispatch:
    types: [dev-deploy]

jobs:
  deploy_to_dev:
    runs-on: ubuntu-18.04
    strategy:
      matrix:
        repos: [ dof_test_app_1, dof_test_app_2 ]
    steps:
      - uses: actions/checkout@v2
        with:
          repository: hpi-schul-cloud/${{ matrix.repos }}
          token: ${{ secrets.REPO_ACCESS_TOKEN }}
          path: ${{ matrix.repos }}
      - run: git checkout ${{ github.event.client_payload.branch }}
        working-directory: ${{github.workspace }}/${{ matrix.repos }}
        continue-on-error: true
        
      - run: echo ${{ github.event.client_payload.sha }}
      - run: echo ${{ github.event.client_payload.ref }}
      
