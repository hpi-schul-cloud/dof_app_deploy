apiVersion: v1
kind: ConfigMap
metadata:
  name: oidcmock-configmap
  namespace: {{ NAMESPACE }}
  labels:
    app: oidcmock
data:
  # See https://github.com/Soluto/oidc-server-mock/blob/master/README.md
  ASPNETCORE_ENVIRONMENT: Development
  SERVER_OPTIONS_INLINE: |
    {
      "AccessTokenJwtType": "JWT",
      "Discovery": {
        "ShowKeySet": true
      },
      "Authentication": {
        "CookieSameSiteMode": "Lax",
        "CheckSessionCookieSameSiteMode": "Lax"
      }
    }
  LOGIN_OPTIONS_INLINE: |
        {
          "AllowRememberLogin": false
        }
  USERS_CONFIGURATION_INLINE: |
    [
      {
        "SubjectId":"1",
        "Username":"User1",
        "Password":"pwd",
      }
     ]
  CLIENTS_CONFIGURATION_INLINE: |
  {
    "ClientId": "client-credentials-mock-client",
    "ClientSecrets": ["client-credentials-mock-client-secret"],
    "Description": "Client for client credentials flow",
    "AllowedGrantTypes": ["client_credentials", "authorization_code"],
    "RequirePkce": false,
    "RedirectUris": ["http://localhost:8080/realms/dBildungscloud/broker/oidc/endpoint"],
    "AllowedScopes": ["openid"],
    "ClientClaimsPrefix": "",
    "Claims": [
      {
        "Type": "string_claim",
        "Value": "string_claim_value"
      },
      {
        "Type": "json_claim",
        "Value": "['value1', 'value2']",
        "ValueType": "json"
      }
    ]
  }

