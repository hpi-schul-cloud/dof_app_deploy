#jinja2: trim_blocks: "True", lstrip_blocks: "True"
apiVersion: v1
kind: Secret
metadata:
  name: erwinidm-secret
  labels:
    app: erwinidm
  namespace: {{ NAMESPACE }}
type: Opaque
data:
  KEYCLOAK_ADMIN: {{ item.ERWINIDM_ADMIN_USER | b64encode }}
  KEYCLOAK_ADMIN_PASSWORD: {{ item.ERWINIDM_ADMIN_PASSWORD | b64encode }}
  # JDBC Format 'jdbc:postgresql://postgres:5432/postgres?currentSchema=<schema>'
  # Explicitly set schema, see https://github.com/keycloak/keycloak/issues/10235
  KC_DB_URL={{ item.ERWINIDM_DB_URL | b64encode }}
  KC_DB_USERNAME: {{ item.ERWINIDM_DB_USER | b64encode }}
  KC_DB_PASSWORD: {{ item.ERWINIDM_DB_PASSWORD | b64encode }}