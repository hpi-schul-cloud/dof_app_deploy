  - name: bash 1
    shell: pwd
  - name: bash 2
    shell: ls -la
  - name: bash 3
    shell: ls -la ~/
  ## helpers, small scripts for maintenance
  - name: create dir .kube
    file:
      path: "{{ ansible_env.HOME }}/.kube/"
      state: directory
      mode: 0700
    tags:
      - kubeconfig
      
  - name: push kubeconfig
    copy:
      src: "{{ kubeconfig_yml }}"
      dest: "{{ ansible_env.HOME }}/.kube/config"
      mode: 0600
    when: kubeconfig_yml is defined
    tags:
      - kubeconfig
    
  - name: push kubeconfig
    copy:
      src: config
      dest: "{{ ansible_env.HOME }}/.kube/config"
      mode: 0600
    when: kubeconfig_yml is undefined
    tags:
      - kubeconfig
    
  - name: Namespace
    kubernetes.core.k8s:
      kubeconfig: ~/.kube/config 
      namespace: "{{ NAMESPACE }}"
      template: namespace.yml.j2
    tags:
      - namespace

