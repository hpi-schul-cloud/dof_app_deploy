mongodb_query_exporter_aggregation_list:
# Teachers
  - |-
      - database: scapp
        collection: accounts
        metrics:
        - name: sc_accounts_teachers_total
          type: gauge
          help: 'The number of teacher accounts'
          value: total
          overrideEmpty: true
          emptyValue: 0
          labels: []
          constLabels: []
        mode: pull
        pipeline: |
          [
            {
                "$lookup" : {
                    "from" : "users",
                    "localField" : "userId",
                    "foreignField" : "_id",
                    "as" : "->users"
                }
            },
            {
                $match: { "->users.roles": { $in: [ObjectId("0000d186816abba584714c98")] } }
            },
            { $count: "total" }
          ]